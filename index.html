<!doctype html>
<html>
    <head>
        <title>Celeste</title>
        <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            .pilot-console h3 { background-color: red; }
            .pilot-console h3.powered { background-color: green; }
        </style>
    </head>
    <body>
        <div class="register">
            Register as role:
            <button id="register-pilot" value="pilot">Pilot</button>
            <button id="register-engineer" value="engineer">Engineer</button>
        </div>
        <section hidden class="pilot-console">
            <h3>Warp Drive Power</h3><br>
            <label for="ship-x">X</label><input type="text" id="ship-x"></input>
            <label for="ship-y">Y</label><input type="text" id="ship-y"></input>
            <button class="move-ship">Move Ship</button>
        </section>
        <section hidden class="engineer-console">
            Hey there
        </section>
        <div class="error" style="color: red;">
        <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
        <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
        <script>
            var socket = io();

            $('.register button').click(function() {
                var role = $(this).val();
                console.log(role);

                socket.emit('register', role, function (err, initialState) {
                    if (err) {
                        $('.error').text(role + " is already registered!");
                        return err;
                    }

                    $('.register').slideUp();
                    $('.' + role + '-console').slideDown();
                });
            });

            socket.on('message', function(msg) {
                console.log(msg);
            });

            $('.move-ship').click(function() {
                var x = $('.ship-x').val(),
                    y = $('.ship-y').val();

                console.log(x, y);
                socket.emit('action', {type:'navigation', x:x, y:y});
            });
        </script>
    </body>
</html>
